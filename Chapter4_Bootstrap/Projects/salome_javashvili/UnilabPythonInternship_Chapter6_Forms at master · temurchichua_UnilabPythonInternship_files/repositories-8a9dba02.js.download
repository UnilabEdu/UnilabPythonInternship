System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(){"use strict";var e,t,n,r,o,i,s,a,c,l,d,u,h,f,p,m,g,y,v,S,b,w,j,x,q,L,A,I,E,T;return{setters:[function(g){e=g._,t=g.t,n=g.g,r=g.e,o=g.c,i=g.h,s=g.f,a=g.o,c=g.a,l=g.r,d=g.F,u=g.n,h=g.C,f=g.a4,p=g.q,m=g.a5},function(e){g=e.c,y=e.w,v=e.a1,S=e.b,b=e.r,w=e.B,j=e.A,x=e.P,q=e.a0,L=e.ab,A=e.aT,I=e.a4,E=e.b3,T=e.J}],execute:function(){let C=class BranchFilterElement extends HTMLElement{constructor(){super(...arguments),this.abortSearch=null,this.originalSelectedItem=null}submit(e){e.preventDefault()}resetField(e){if("Escape"!==i(e))return;const t=this.field.value.trim();this.field.value="",t&&this.search()}reset(){this.field.focus(),this.field.value="",s(this.field,"input")}get activeFilter(){var e;return null!==(e=this.filters.find((e=>e.classList.contains("selected"))))&&void 0!==e?e:null}async search(){var e;this.originalSelectedItem||(this.originalSelectedItem=this.activeFilter);const t=this.field.value.trim().length>0,n=function(e){const t=e.form;if(e.value.trim()){const n=new URL(t.action,window.location.origin),r=new URLSearchParams(n.search.slice(1)),o=t.elements.namedItem("utf8");return o instanceof HTMLInputElement&&r.append("utf8",o.value),r.append("query",e.value),n.search=r.toString(),n.toString()}return t.getAttribute("data-reset-url")}(this.field);this.classList.toggle("is-search-mode",t),this.classList.add("is-loading");for(const i of this.filters)i.classList.remove("selected");t?this.allFilter.classList.add("selected"):this.originalSelectedItem&&(this.originalSelectedItem.classList.add("selected"),this.originalSelectedItem=null),null===(e=this.abortSearch)||void 0===e||e.abort();const{signal:r}=this.abortSearch=new AbortController;try{const e=await g(document,n,{signal:r});y(null,"",n),this.result.innerHTML="",this.result.appendChild(e)}catch(o){}r.aborted||this.classList.remove("is-loading")}};e([t],C.prototype,"field",void 0),e([t],C.prototype,"result",void 0),e([t],C.prototype,"allFilter",void 0),e([n],C.prototype,"filters",void 0),e([r(100)],C.prototype,"search",null),C=e([o],C);let k=class BranchFilterItemElement extends HTMLElement{get branch(){return this.getAttribute("branch")}get branches(){const e=this.closest("branch-filter").querySelectorAll("branch-filter-item");return Array.from(e).filter((e=>e.branch===this.branch))}loading(e){for(const t of this.branches)t.spinner.hidden=!e,t.destroyButton&&(t.destroyButton.hidden=e)}set mode(e){for(const t of this.branches)t.classList.toggle("Details--on","restore"===e)}async restore(e){e.preventDefault(),this.loading(!0);const t=e.target;let n;try{n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch(r){}finally{n&&n.ok||location.reload(),this.loading(!1)}this.mode="destroy"}async destroy(e){e.preventDefault(),this.loading(!0);const t=e.target;let n;try{n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch(r){}finally{n&&n.ok||location.reload(),this.loading(!1)}this.mode="restore"}};e([t],k.prototype,"destroyButton",void 0),e([t],k.prototype,"spinner",void 0),k=e([o],k),a(".js-new-badge-autodismiss",{constructor:HTMLFormElement,add:e=>{const t=e.closest("details");t.addEventListener("toggle",(()=>{t.hasAttribute("open")&&fetch(e.action,{method:e.method,body:new FormData(e),headers:{"X-Requested-With":"XMLHttpRequest"}})}))}});let _=class GetRepoElement extends HTMLElement{constructor(){super(...arguments),this.shouldRefreshList=!1}showDownloadMessage(e){const t=this.findPlatform(e);t&&this.showPlatform(t)}showCodespaces(e){const t=this.findPlatform(e);t&&(this.showPlatform(t),this.loadAndUpdateContent())}showCodespaceEditorSelect(){const e=document.querySelector('[data-target="editor-select.form"]'),t=document.querySelector('[data-target="editor-select.postLaunch"]'),n=document.querySelector('[data-target="editor-select.createError"]');e&&t&&n&&(e.hidden=!1,t.hidden=!0,n.hidden=!0),this.showPlatform("codespace_editor_select")}refreshList(){this.shouldRefreshList&&(this.shouldRefreshList=!1,this.loadAndUpdateContent())}trackDelete(){this.shouldRefreshList=!0}hideSpinner(){this.codespaceLoadingMenu.hidden=!0,this.codespaceList.hidden=!1}showSpinner(){this.codespaceLoadingMenu.hidden=!1,this.codespaceList.hidden=!0}onDetailsToggle(){this.modal.hidden=!1;for(const e of this.platforms)e.hidden=!0}showPlatform(e){this.modal.hidden=!0;for(const t of this.platforms)t.hidden=t.getAttribute("data-platform")!==e}findPlatform(e){return e.currentTarget.getAttribute("data-open-app")||v()}refreshOnError(){window.location.reload()}loadAndUpdateContent(){this.codespaceList.setAttribute("src",this.codespaceList.getAttribute("data-src"))}};e([t],_.prototype,"modal",void 0),e([t],_.prototype,"codespaceLoadingMenu",void 0),e([t],_.prototype,"codespaceList",void 0),e([n],_.prototype,"platforms",void 0),_=e([o],_),a(".repository-import",{subscribe:e=>S(e,"socket:message",(function(e){const t=e.detail.data;t.redirect_to&&(document.location.href=t.redirect_to,e.stopImmediatePropagation())}))}),c("change","input.js-repository-import-lfs-opt",(function({currentTarget:e}){const t=parseInt(e.getAttribute("data-percent-used")||""),n=e.closest(".js-repository-import-lfs-container"),r=e.getAttribute("data-used")||"";n.querySelector(".js-repository-import-lfs-warn").classList.toggle("d-none",!(t>100)),n.querySelector(".js-usage-bar").classList.toggle("exceeded",t>=100),n.querySelector(".js-usage-bar").setAttribute("aria-label",t+"%"),n.querySelector(".js-repository-import-lfs-progress").style.width=t+"%",n.querySelector("span.js-usage-text").textContent=r})),l(".js-repository-import-author-form",(async function(e,t){const n=await t.html();e.closest(".js-repository-import-author").replaceWith(n.html)})),c("click",".js-repository-import-projects-cancel-button",(function(){const e=document.querySelector(".js-repository-import-projects-cancel-form");b(e)}));let R=!1;function M(){const e=document.querySelector(".js-repo-name");s(e,"input");const t=document.querySelector('.js-owner-container [aria-checked="true"]'),n="false"!==t.getAttribute("data-org-allow-public-repos"),r=document.querySelector(".js-privacy-toggle[value=public]");z(n,r,document.querySelector(".js-privacy-toggle-label-public"),document.querySelector(".js-public-description"),document.querySelector(".js-public-restricted-by-policy-description"));const o=function(e,t){let n=!1;const r=document.querySelectorAll(".js-new-repo-internal-visibility");for(const o of r){o.hidden=!0;const e=o.querySelector(".js-privacy-toggle[value=internal]");e instanceof HTMLInputElement&&e.checked&&(n=!0)}if(e){const r=document.querySelector("#new-repo-internal-visibility-"+e);if(r){r.hidden=!1;const e=r.querySelector(".js-privacy-toggle-label-internal"),o=r.querySelector(".js-internal-description"),i=r.querySelector(".js-internal-restricted-by-policy-description"),a=r.querySelector(".js-privacy-toggle[value=internal]");if(a instanceof HTMLInputElement)return"false"===t.getAttribute("data-org-allow-internal-repos")?(a.disabled=!0,e&&e.classList.add("color-text-tertiary"),o&&(o.hidden=!0),i&&(i.hidden=!1)):(n&&(a.checked=!0,s(a,"change")),a.disabled=!1,e&&e.classList.remove("color-text-tertiary"),o&&(o.hidden=!1),i&&(i.hidden=!0)),a}}return null}(t.getAttribute("data-business-id"),t),i="false"!==t.getAttribute("data-org-allow-private-repos"),a=document.querySelector(".js-privacy-toggle[value=private]"),c=document.querySelector(".js-privacy-toggle-label-private"),l=document.querySelector(".js-private-description"),d=document.querySelector(".js-private-restricted-by-policy-description");z(i,a,c,l,d),function(){const e=document.querySelectorAll('.js-org-upgrade-link:not([hidden=""]');for(const t of e)t.hidden=!0}();const u="false"!==t.getAttribute("data-org-private-restricted-by-plan"),h=document.querySelector(".js-upgrade-private-description"),f="false"!==t.getAttribute("data-org-show-upgrade"),p=t.getAttribute("data-org-name"),m=p?document.querySelector(`a[data-upgrade-link="${p}"]`):null,g=document.querySelector(".js-ask-owner-message");i||!u?(h&&(h.hidden=!0),m&&(m.hidden=!0),g&&(g.hidden=!0)):(d&&(d.hidden=u),h&&(h.hidden=!1),m&&(m.hidden=!f),g&&(g.hidden=f));const y=t.getAttribute("data-default-new-repo-branch"),v=document.querySelector(".js-new-repo-owner-default-branch");v&&(v.textContent=y);const S=t.getAttribute("data-owner-settings-link-prefix"),b=document.querySelector(".js-new-repo-owner-settings-link-prefix");b&&(b.textContent=S);const w=t.getAttribute("data-owner-settings-url"),j=document.querySelector(".js-repo-owner-default-branch-settings-link-container"),x=document.querySelector(".js-org-repo-owner-default-branch-settings-info");if(w){const e=document.querySelector(".js-new-repo-owner-settings-link");e&&(e.href=w,j&&(j.hidden=!1)),x&&(x.hidden=!0)}else if(j&&(j.hidden=!0,x)){const e=t.hasAttribute("data-viewer-is-org-admin");x.hidden=!e}const q="true"===t.getAttribute("data-org-show-trade-controls"),L="true"===t.getAttribute("data-viewer-is-org-admin"),A="true"===t.getAttribute("data-user-show-trade-controls"),I=q&&!i,E=document.querySelector(".js-trade-controls-description"),T=document.querySelector(".js-individual-trade-controls-description");if(A||I){const e=!A&&!L&&I;d&&(d.hidden=!e),a.disabled=!0,l&&(l.hidden=!0),h&&(h.hidden=!0),m&&(m.hidden=!0),g&&(g.hidden=!0)}else E&&(E.hidden=!0),T&&(T.hidden=!0);A?(E&&(E.hidden=!0),T&&(T.hidden=!1)):I&&E&&(E.hidden=!L),function(e,t,n,r){let o=null;"private"!==e.getAttribute("data-default")||r.disabled?"internal"===e.getAttribute("data-default")&&n&&!n.disabled?o=n:t&&!t.disabled?o=t:n&&!n.disabled&&(o=n):o=r;if(!o)return;const i=t&&t.disabled&&t.checked||r.disabled&&r.checked||n&&n.disabled&&n.checked,a=!(t&&t.checked||n&&n.checked||r.checked);!1!==R&&!0!==i&&!0!==a||(o.checked=!0,s(o,"change"))}(t,r,o,a),function(e){for(const r of document.querySelectorAll(".js-with-permission-fields"))r.hidden=!e;for(const r of document.querySelectorAll(".js-without-permission-fields"))r.hidden=e;const t=document.querySelector(".errored"),n=document.querySelector("dl.warn");t&&(t.hidden=!e);n&&(n.hidden=!e)}("yes"===t.getAttribute("data-permission")),function(){const e=document.querySelector("#js-upgrade-container");if(!e)return;const t=document.querySelector("#js-payment-methods-form");e.firstElementChild&&t.appendChild(e.firstElementChild);const n=document.querySelector("input[name=owner]:checked").value,r=t.querySelector(`.js-upgrade[data-login="${n}"]`);r&&e.appendChild(r)}(),P();const C=document.querySelector(".js-quick-install-container");if(C){const e=C.querySelector(".js-quick-install-divider");e.hidden=!0;const t=document.querySelector("input[name=owner]:checked").parentElement;if(t){const n=t.querySelector(".js-quick-install-list-template");if(n instanceof HTMLTemplateElement){const t=C.querySelector(".js-account-apps");t.innerHTML="",t.append(n.content.cloneNode(!0)),n.children.length>0&&(e.hidden=!1)}}}}function z(e,t,n,r,o){e?(t&&(t.disabled=!1),n&&n.classList.remove("color-text-tertiary"),r&&(r.hidden=!1),o&&(o.hidden=!0)):(t&&(t.disabled=!0),n&&n.classList.add("color-text-tertiary"),r&&(r.hidden=!0),o&&(o.hidden=!1))}function P(e){const t=document.querySelector("#js-upgrade-container");if(!t)return;const n=t.querySelector(".js-billing-section"),r=t.querySelector(".js-confirm-upgrade-checkbox");let o=e?e.target:null;o||(o=document.querySelector(".js-privacy-toggle:checked")),"false"===o.value?(t.hidden=!1,n&&n.classList.remove("has-removed-contents"),r&&(r.checked=!0)):(t.hidden=!0,n&&n.classList.add("has-removed-contents"),r&&(r.checked=!1)),O()}function O(){const e=document.querySelector(".js-repo-form"),t=e.querySelector(".js-repository-owner-choice:checked"),n=e.querySelector(".js-repo-name"),r=e.querySelector(".js-repo-url"),o=e.querySelector(".js-repo-gitignore"),i=e.querySelector(".js-repo-license");let s=!r||!r.classList.contains("is-autocheck-errored");if(s=s&&!!t,s&&n&&(s=n.classList.contains("is-autocheck-successful"),"private"===document.querySelector(".js-privacy-toggle:checked").value&&(s=s&&function(){const e=document.querySelector("#js-upgrade-container");if(!e)return!0;if(e.querySelector(".js-ofac-sanction-notice"))return!1;const t=e.querySelector(".js-confirm-upgrade-checkbox");if(t instanceof HTMLInputElement&&!t.checked)return!1;const n=e.querySelector(".js-zuora-billing-info");if(n&&n.classList.contains("d-none"))return!1;return!0}())),o&&o.checked){const t=e.querySelector('input[name="repository[gitignore_template]"]:checked');s=s&&""!==t.value}if(i&&i.checked){const t=e.querySelector('input[name="repository[license_template]"]:checked');s=s&&""!==t.value}e.querySelector("button[type=submit]").disabled=!s}async function N(e){const t=e.form;t.querySelector("#release_draft").value="1",H(e,"saving");const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)return void H(e,"failed");const r=await n.json();return H(e,"saved"),setTimeout(H,5e3,e,"default"),s(t,"release:saved",{release:r}),r}function F(e){const t=e.closest(".js-releases-marketplace-publish-container").querySelector(".js-releases-marketplace-publish-preview");e.checked?t.classList.remove("d-none"):t.classList.add("d-none")}function H(e,t){for(const n of e.querySelectorAll(".js-save-draft-button-state"))n.hidden=n.getAttribute("data-state")!==t;e.disabled="saving"===t}function D(e){const t=document.querySelector(".js-release-target-wrapper");if(null!=t){switch(e){case"valid":t.classList.add("d-none");break;case"loading":break;default:t.classList.remove("d-none")}for(const t of document.querySelectorAll(".js-tag-status-message"))t.hidden=t.getAttribute("data-state")!==e}}a("#js-upgrade-container .js-zuora-billing-info:not(.d-none)",O),a(".page-new-repo",(function(){const e=document.querySelector("#js-upgrade-container");e&&(e.hidden=!0),M();const t=document.querySelector(".js-repo-form"),n=t.querySelector(".js-repo-url");if(n)return void n.focus();const r=t.querySelector(".js-template-repository-select");if(r)return void r.focus();const o=t.querySelector(".js-owner-select");o&&o.focus()})),c("click",".js-reponame-suggestion",(function(e){const t=document.querySelector(".js-repo-name");t.value=e.currentTarget.textContent,s(t,"input",!1)})),c("click",".js-privacy-toggle",(function(){R=!0})),c("change",".js-privacy-toggle",P),c("details-menu-selected",".js-owner-container",M,{capture:!0}),c("change","#js-upgrade-container input",O),w("#js-upgrade-container input",O),w(".js-owner-reponame .js-repo-name",(function(e){const t=document.querySelector(".js-personal");if(t){const n=document.querySelector(".js-owner-container input.js-repository-owner-is-viewer"),r=e.target,o=!(n&&n.checked&&n.defaultValue.toLowerCase()===r.value.toLowerCase());t.hidden=o;document.querySelector("#repo-name-suggestion").hidden=!o}O()})),c("auto-check-send",".js-repo-name-auto-check",(function(e){const t=e.currentTarget.form.querySelector("input[name=owner]:checked").value;e.detail.body.append("owner",t)})),c("auto-check-complete","#repository_name",(function(){O()})),w(".js-repo-url",(function(e){const t=e.target;if(!(t instanceof HTMLInputElement))return;const n=t.closest(".form-group");if(!(n instanceof HTMLDListElement))return;const r=document.querySelector(".js-insecure-url-warning"),o=document.querySelector(".js-svn-url-error"),i=document.querySelector(".js-git-url-error"),s=t.value.toLowerCase();r.hidden=!s.startsWith("http://"),o.hidden=!s.startsWith("svn://"),i.hidden=!s.startsWith("git://"),s.startsWith("svn://")||s.startsWith("git://")?(t.classList.add("is-autocheck-errored"),n.classList.add("errored")):(t.classList.remove("is-autocheck-errored"),n.classList.remove("errored")),O()})),c("change",".js-toggle-repo-init-setting",(e=>{const t=e.currentTarget;t.checked||function(e){const t=e.closest(".js-repo-init-setting-container");if(!t)return;const n=t.querySelector(".js-repo-init-setting-unchecked-menu-option");n.checked||(n.checked=!0,s(n,"change"))}(t),O()})),c("change",".js-repo-init-setting-unchecked-menu-option",(e=>{const t=e.currentTarget;t.checked&&function(e){const t=e.closest(".js-repo-init-setting-container");if(!t)return;const n=t.querySelector(".js-toggle-repo-init-setting");n.checked&&(n.checked=!1,s(n,"change"))}(t),O()})),c("change",".js-repo-init-setting-menu-option",O),c("change",".js-repo-readme",O),c("change",".js-toggle-new-repo-default-branch-info",(e=>{!function(e){const t=e.closest("form"),n=t.querySelector(".js-new-repo-default-branch-info");if(!n)return;const r=t.querySelectorAll(".js-toggle-new-repo-default-branch-info:checked").length>0;n.hidden=!r}(e.currentTarget)})),c("tab-container-changed",".js-branches-tags-tabs",(async function(e){const t=e.detail.relatedTarget,n=e.currentTarget;if(!n)return;let r,o;for(const s of n.querySelectorAll("[data-controls-ref-menu-id]")){if(!(s instanceof d||s instanceof u))return;const e=s.getAttribute("data-controls-ref-menu-id"),n=t.id===e;s.hidden=!n,n?o=s:r||(r=s.input?s.input.value:"")}const i=o&&o.input;i&&(o&&void 0!==r&&(i.value=r),i.focus())})),a(".js-pulse-contribution-data",(e=>{!async function(e){const t=e.getAttribute("data-pulse-diffstat-summary-url");let n;try{t&&(n=await async function(e){return g(document,e)}(t),function(e,t){t.innerHTML="",t.appendChild(e)}(n,e))}catch(r){const t=e.querySelector(".js-blankslate-loading"),n=e.querySelector(".js-blankslate-error");t.classList.add("d-none"),n.classList.remove("d-none")}}(e)})),c("change",".js-releases-marketplace-publish-field",(function(e){F(e.currentTarget)})),a(".js-releases-marketplace-publish-field",(function(e){F(e)})),c("click",".js-save-draft",(function(e){N(e.currentTarget),e.preventDefault()})),c("click",".js-timeline-tags-expander",(function(e){e.currentTarget.closest(".js-timeline-tags").classList.remove("is-collapsed")})),c("release:saved",".js-release-form",(function(e){const t=e.detail.release,n=e.currentTarget,r=n.getAttribute("data-repo-url"),o=t.update_url||K("tag",r,t.tag_name);if(n.setAttribute("action",o),t.update_authenticity_token){n.querySelector("input[name=authenticity_token]").value=t.update_authenticity_token}const i=t.edit_url||K("edit",r,t.tag_name);y(j(),document.title,i);const s=document.querySelector("#delete_release_confirm form");if(s){const e=t.delete_url||K("tag",r,t.tag_name);if(s.setAttribute("action",e),t.delete_authenticity_token){s.querySelector("input[name=authenticity_token]").value=t.delete_authenticity_token}}const a=n.querySelector("#release_id");if(!a.value){a.value=t.id;const e=document.createElement("input");e.type="hidden",e.name="_method",e.value="put",n.appendChild(e)}})),c("click",".js-publish-release",(function(){document.querySelector("#release_draft").value="0"}));const U=new WeakMap;async function B(e){if(!e.value)return;if(e.value===U.get(e))return;D("loading"),U.set(e,e.value);const t=e.getAttribute("data-url"),n=new URL(t,window.location.origin),r=new URLSearchParams(n.search.slice(1));r.append("tag_name",e.value),n.search=r.toString();const o=await fetch(n.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!o.ok)return void D("invalid");const i=await o.json();"duplicate"===i.status&&parseInt(e.getAttribute("data-existing-id"))===parseInt(i.release_id)?D("valid"):(document.querySelector(".js-release-tag .js-edit-release-link").setAttribute("href",i.url),D(i.status))}function K(e,t,n){return`${t}/releases/${e}/${n}`}function V(e){const t=e.closest("form").querySelector(".js-previewable-comment-form");if(!t)return;let n=t.getAttribute("data-base-preview-url");n||(n=String(t.getAttribute("data-preview-url")),t.setAttribute("data-base-preview-url",n));const r=e.querySelectorAll('input[name="release[tag_name]"], input[name="release[target_commitish]"]:checked'),o=new URL(n,window.location.origin),i=new URLSearchParams(o.search.slice(1));for(const s of r)s.value&&i.append(s.name,s.value);o.search=i.toString(),t.setAttribute("data-preview-url",o.toString())}a("input.js-release-tag-field",{constructor:HTMLInputElement,initialize(e){B(e),e.addEventListener("blur",(function(){B(e)}))}}),c("change",".js-release-tag",(function(e){V(e.currentTarget)})),a(".js-release-form .js-previewable-comment-form",(function(e){V(e.closest("form").querySelector(".js-release-tag"))})),c("auto-check-message-updated",".js-rename-branch-input",(function(e){!function(e){const t=e.closest(".js-rename-branch-form"),n=t.querySelectorAll(".js-rename-branch-new-name");let r=e.value;if(r!==e.defaultValue&&""!==r){const e=t.querySelector(".js-rename-branch-autocheck-message");e&&e.hasAttribute("data-normalized-name")&&(r=e.getAttribute("data-normalized-name"));for(const t of n)t.textContent=r}}(e.currentTarget)})),c("change",".js-template-repository-choice",(function(e){const t=e.target,n=t.checked&&""!==t.value,r=t.form;r.querySelector(".js-repository-auto-init-options").classList.toggle("has-removed-contents",n);const o=r.querySelectorAll(".js-template-repository-setting"),i=r.querySelectorAll(".js-template-repository-name-display");if(n){const e=t.closest(".js-template-repository-choice-container").querySelector(".js-template-repository-name"),n=t.getAttribute("data-owner"),o=r.querySelector(`.js-repository-owner-choice[value="${n}"]`);if(o instanceof HTMLInputElement)o.checked=!0,s(o,"change");else{const e=r.querySelector(".js-repository-owner-choice.js-repository-owner-is-viewer");e.checked=!0,s(e,"change")}for(const t of i)t.textContent=e.textContent}else for(const s of i)s.textContent="";for(const s of o)s.hidden=!n})),x("keydown",".js-tree-finder-field",(e=>{"Escape"===e.key&&(e.preventDefault(),history.back())}));a(".js-tree-finder",(e=>{const t=e.querySelector(".js-tree-finder-field"),n=e.querySelector(".js-tree-browser-results");if(n.childElementCount>0)return;(async e=>{if(!(e instanceof q))return;const t=e.getAttribute("data-url"),n=e.querySelector(".js-tree-browser-result-template"),r=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}}),{paths:o}=await r.json();e.addLazyItems(o,(e=>{const t=n.content.cloneNode(!0).firstElementChild,r=t.querySelector(".js-tree-browser-result-anchor"),o=r.querySelector(".js-tree-browser-result-path"),i=new URL(r.href,window.location.origin);return i.pathname=`${i.pathname}/${encodeURI(e)}`,r.href=String(i),r.id="entry-"+Math.random().toString().substr(2,5),o.textContent=e,t})),e.sort()})(e);const r=new h(t,n);r.start(),e.addEventListener("fuzzy-list-will-sort",(()=>{r.stop()})),e.addEventListener("fuzzy-list-sorted",(()=>{r.start(),r.navigate()}))}));let W=null;a(".js-pjax-files",(e=>{if(!W)return void(W=window.location.pathname);const t=e.querySelector(`a[href='${W}']`);t&&setTimeout((function(){document.activeElement&&document.activeElement!==document.body||t.focus()}),200),W=window.location.pathname}));let $=null;const X=new WeakMap;function G(e){e.classList.remove("is-progress-bar");const t=e.closest(".js-upload-manifest-file-container");t.querySelector(".js-upload-progress").hidden=!0;t.querySelector(".js-upload-meter-text .js-upload-meter-filename").textContent=""}function J(e){G(e.currentTarget)}function Q(e){return e.closest("form").querySelector("#release_id").value}c("file-attachment-accept",".js-upload-manifest-file",(function(e){const{attachments:t}=e.detail,n=parseInt(e.currentTarget.getAttribute("data-directory-upload-max-files")||"",10);t.length>n&&(e.preventDefault(),e.currentTarget.classList.add("is-too-many"))})),c("document:drop",".js-upload-manifest-tree-view",(async function(e){const{transfer:t}=e.detail,n=e.currentTarget,r=await f.traverse(t,!0),o=document.querySelector("#js-repo-pjax-container");o.addEventListener("pjax:success",(()=>{o.querySelector(".js-upload-manifest-file").attach(r)}),{once:!0});const i=n.getAttribute("data-drop-url");L({url:i,container:o})})),c("upload:setup",".js-upload-manifest-file",(async function(e){const{batch:t,form:n,preprocess:r}=e.detail,o=e.currentTarget;function i(){n.append("upload_manifest_id",X.get(o))}if(function(e,t){const n=e.closest(".js-upload-manifest-file-container").querySelector(".js-upload-progress");n.hidden=!1,e.classList.add("is-progress-bar");const r=n.querySelector(".js-upload-meter-text");r.querySelector(".js-upload-meter-range-start").textContent=String(t.uploaded()+1),r.querySelector(".js-upload-meter-range-end").textContent=String(t.size)}(o,t),X.get(o))return void i();if($)return void r.push($.then(i));const s=o.closest(".js-upload-manifest-file-container").querySelector(".js-upload-manifest-form");$=fetch(s.action,{method:s.method,body:new FormData(s),headers:{Accept:"application/json"}});const[a,c]=function(){let e;return[new Promise((t=>{e=t})),e]}();r.push(a.then(i));const l=await $;if(!l.ok)return;const d=await l.json();document.querySelector(".js-manifest-commit-form").elements.namedItem("manifest_id").value=d.upload_manifest.id,X.set(o,d.upload_manifest.id),$=null,c()})),c("upload:start",".js-upload-manifest-file",(function(e){const{attachment:t,batch:n}=e.detail,r=e.currentTarget.closest(".js-upload-manifest-file-container").querySelector(".js-upload-progress").querySelector(".js-upload-meter-text");r.querySelector(".js-upload-meter-range-start").textContent=n.uploaded()+1;r.querySelector(".js-upload-meter-filename").textContent=t.fullPath})),c("upload:complete",".js-upload-manifest-file",(function(e){const{attachment:t,batch:n}=e.detail,r=document.querySelector(".js-manifest-commit-file-template").querySelector(".js-manifest-file-entry").cloneNode(!0);r.querySelector(".js-filename").textContent=t.fullPath;const o=t.id;r.querySelector(".js-remove-manifest-file-form").elements.namedItem("file_id").value=o;const i=document.querySelector(".js-manifest-file-list");i.hidden=!1,e.currentTarget.classList.add("is-file-list");i.querySelector(".js-manifest-file-list-root").appendChild(r),n.isFinished()&&G(e.currentTarget)})),c("upload:progress",".js-upload-manifest-file",(function(e){const{batch:t}=e.detail;e.currentTarget.closest(".js-upload-manifest-file-container").querySelector(".js-upload-meter").style.width=t.percent()+"%"})),c("upload:error",".js-upload-manifest-file",J),c("upload:invalid",".js-upload-manifest-file",J),l(".js-remove-manifest-file-form",(async function(e,t){await t.html();const n=e.closest(".js-manifest-file-list-root");if(e.closest(".js-manifest-file-entry").remove(),!n.hasChildNodes()){n.closest(".js-manifest-file-list").hidden=!0;document.querySelector(".js-upload-manifest-file").classList.remove("is-file-list")}})),a(".js-manifest-ready-check",{initialize(e){!async function(e){const t=e.getAttribute("data-redirect-url");try{await A(e.getAttribute("data-poll-url")),window.location.href=t}catch(n){document.querySelector(".js-manifest-ready-check").hidden=!0,document.querySelector(".js-manifest-ready-check-failed").hidden=!1}}(e)}}),c("click",".js-release-remove-file",(function(e){const t=e.currentTarget.closest(".js-release-file");t.classList.add("delete"),t.querySelector("input.destroy").value="true"})),c("click",".js-release-undo-remove-file",(function(e){const t=e.currentTarget.closest(".js-release-file");t.classList.remove("delete"),t.querySelector("input.destroy").value=""}));let Y=null;function Z(e,t){t.append("release_id",Q(e));const n=Array.from(document.querySelectorAll(".js-releases-field .js-release-file.delete .id"));if(n.length){const e=n.map((e=>e.value));t.append("deletion_candidates",e.join(","))}}c("release:saved",".js-release-form",(function(e){const t=e.currentTarget;Y=null;let n=!1;for(const o of t.querySelectorAll(".js-releases-field .js-release-file"))o.classList.contains("delete")?o.remove():o.classList.contains("js-template")||(n=!0);const r=t.querySelector(".js-releases-field");r.classList.toggle("not-populated",!n),r.classList.toggle("is-populated",n)})),c("upload:setup",".js-upload-release-file",(function(e){const{form:t,preprocess:n}=e.detail,r=e.currentTarget;if(Q(r))return void Z(r,t);if(!Y){const e=document.querySelector(".js-save-draft");Y=N(e)}const o=Z.bind(null,r,t);n.push(Y.then(o))})),c("upload:start",".js-upload-release-file",(function(e){const t=e.detail.policy;e.currentTarget.querySelector(".js-upload-meter").classList.remove("d-none");const n=t.asset.replaced_asset;if(n)for(const r of document.querySelectorAll(".js-releases-field .js-release-file .id"))Number(r.value)===n&&r.closest(".js-release-file").remove()})),c("upload:complete",".js-upload-release-file",(function(e){const{attachment:t}=e.detail,n=document.querySelector(".js-releases-field"),r=n.querySelector(".js-template").cloneNode(!0);r.classList.remove("d-none","js-template"),r.querySelector("input.id").value=t.id;const o=t.name||t.href.split("/").pop();for(const s of r.querySelectorAll(".js-release-asset-filename"))s instanceof HTMLInputElement?s.value=o:s.textContent=o;const i=`(${(t.file.size/1048576).toFixed(2)} MB)`;r.querySelector(".js-release-asset-filesize").textContent=i,n.appendChild(r),n.classList.remove("not-populated"),n.classList.add("is-populated");e.currentTarget.querySelector(".js-upload-meter").classList.add("d-none")})),c("upload:progress",".js-upload-release-file",(function(e){const{attachment:t}=e.detail;e.currentTarget.querySelector(".js-upload-meter").style.width=t.percent+"%"}));let ee=class ReadmeTocElement extends HTMLElement{connectedCallback(){this.trigger.addEventListener("menu:activate",(e=>{this.onMenuOpened(e)}));const e=this.getHeadings();this.observer=new IntersectionObserver((()=>this.observerCallback()),{root:null,rootMargin:"0px",threshold:1});for(const t of e)this.observer.observe(t)}disconnectedCallback(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}blur(){window.setTimeout((()=>{document.activeElement&&document.activeElement.blur()}),0)}onMenuOpened(e){const t=e.currentTarget,n=t.getAttribute("data-menu-hydro-click")||"",r=t.getAttribute("data-menu-hydro-click-hmac")||"",o=t.getAttribute("data-hydro-client-context")||"";I(n,r,o),this.observerCallback()}getHeadings(){return this.content.querySelectorAll("h1,h2,h3,h4,h5,h6")}observerCallback(){const e=Array.prototype.slice.call(this.getHeadings()).filter((e=>this.isElementInViewPort(e)))[0];for(const t of this.entries)t.removeAttribute("aria-current");if(e){const t=this.mapHeadingToListItemUsingAnchor(e);if(t){t.setAttribute("aria-current","page");const e=t.closest("div");e&&t.offsetTop&&(e.scrollTop=t.offsetTop-parseInt(getComputedStyle(e).paddingTop))}}}isElementInViewPort(e){return e.getBoundingClientRect().y>=0}mapHeadingToListItemUsingAnchor(e){const t=e.getElementsByTagName("a")[0];if(t)return this.entries.find((e=>e.href.replace("user-content-","")===t.href))}};e([t],ee.prototype,"trigger",void 0),e([t],ee.prototype,"content",void 0),e([n],ee.prototype,"entries",void 0),ee=e([o],ee);let te=class InputDemuxElement extends HTMLElement{connectedCallback(){this.storedInput=Array(this.control.children.length).fill(""),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const e=this.closest("details");e&&(e.addEventListener("mouseover",(()=>{this.routeCustomEvent(new CustomEvent("container-mouseover"))}),{once:!0}),e.addEventListener("toggle",(()=>{e.open&&this.source.focus()})))}relayKeydown(e){if(e.target===this.source&&"ArrowDown"===e.key)e.preventDefault(),e.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"));else if("Escape"===e.key){const e=this.closest("details");e&&e.removeAttribute("open")}}relayInput(e){if(!e.target)return;const t=e.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:t}))}routeCustomEvent(e){this.sinks[this.selectedIndex].dispatchEvent(e)}get selectedIndex(){const e=this.control.querySelector('[aria-selected="true"]');if(!e)throw new Error("no selected element");return Array.from(this.control.children).indexOf(e)}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(e){this.source.value=this.storedInput[this.selectedIndex];const t=e.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=t,this.source.setAttribute("aria-label",t),this.notifySelected()}notifySelected(){const e=this.sinks[this.selectedIndex],t=new CustomEvent("tab-selected");e.dispatchEvent(t)}};e([t],te.prototype,"source",void 0),e([n],te.prototype,"sinks",void 0),e([t],te.prototype,"control",void 0),te=e([o],te);const{getItem:ne,setItem:re,removeItem:oe}=E("localStorage",{throwQuotaErrorsOnSet:!0});var ie,se;!function(e){e.Branch="branch",e.Tag="tag"}(ie||(ie={}));class SearchIndex{constructor(e,t,n,r,o){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.isLoading=!0,this.fetchInProgress=!1,this.refType=e,this.selector=t,this.refEndpoint=n,this.cacheKey=r,this.nameWithOwner=o}render(){this.selector.render()}async fetchData(){if(this.isLoading&&!this.fetchInProgress){if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0;const e=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(e)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}}async processResponse(e){this.emitStats(e);const t=e.clone(),n=await e.json();this.knownItems=n.refs,this.cacheKey=n.cacheKey,this.flushToLocalStorage(await t.text())}emitStats(e){if(!e.ok)throw T({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0),new Error("Unable to fetch refs: "+e.status);switch(e.status){case 200:T({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break;case 304:T({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break;default:T({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(e){if(""===e)return void(this.currentSearchResult=this.knownItems);const t=[],n=[];let r;this.exactMatchFound=!1;for(const o of this.knownItems)r=o.indexOf(e),r<0||(0!==r?t.push(o):(n.push(o),e===o&&(this.exactMatchFound=!0)));this.currentSearchResult=[...n,...t]}bootstrapFromLocalStorage(){const e=ne(this.localStorageKey);if(!e)return!1;const t=JSON.parse(e);return t.cacheKey===this.cacheKey&&"refs"in t?(this.knownItems=t.refs,this.isLoading=!1,T({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0):(oe(this.localStorageKey),!1)}async flushToLocalStorage(e){try{re(this.localStorageKey,e)}catch(t){if(!t.message.toLowerCase().includes("quota"))throw t;this.clearSiblingLocalStorage(),T({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{re(this.localStorageKey,e)}catch(n){n.message.toLowerCase().includes("quota")&&T({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}}clearSiblingLocalStorage(){for(const e of Object.keys(localStorage))e.startsWith(SearchIndex.LocalStoragePrefix)&&oe(e)}get localStorageKey(){return`${SearchIndex.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}}SearchIndex.LocalStoragePrefix="ref-selector";var ae="undefined"==typeof document?void 0:document;function ce(e,t){var n=e.nodeName,r=t.nodeName;return n===r||!!(t.actualize&&n.charCodeAt(0)<91&&r.charCodeAt(0)>90)&&n===r.toUpperCase()}function le(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var de={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}le(e,t,"selected")},INPUT:function(e,t){le(e,t,"checked"),le(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var o=r.nodeValue;if(o==n||!n&&o==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,o=-1,i=0,s=e.firstChild;s;)if("OPTGROUP"===(r=s.nodeName&&s.nodeName.toUpperCase()))s=(n=s).firstChild;else{if("OPTION"===r){if(s.hasAttribute("selected")){o=i;break}i++}!(s=s.nextSibling)&&n&&(s=n.nextSibling,n=null)}e.selectedIndex=o}}};function ue(){}function he(e){return e.id}var fe=function(e){return function(t,n,r){if(r||(r={}),"string"==typeof n)if("#document"===t.nodeName||"HTML"===t.nodeName){var o=n;(n=ae.createElement("html")).innerHTML=o}else i=n,!se&&ae.createRange&&(se=ae.createRange()).selectNode(ae.body),se&&se.createContextualFragment?s=se.createContextualFragment(i):(s=ae.createElement("body")).innerHTML=i,n=s.childNodes[0];var i,s,a,c=r.getNodeKey||he,l=r.onBeforeNodeAdded||ue,d=r.onNodeAdded||ue,u=r.onBeforeElUpdated||ue,h=r.onElUpdated||ue,f=r.onBeforeNodeDiscarded||ue,p=r.onNodeDiscarded||ue,m=r.onBeforeElChildrenUpdated||ue,g=!0===r.childrenOnly,y={};function v(e){a?a.push(e):a=[e]}function S(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var r=void 0;t&&(r=c(n))?v(r):(p(n),n.firstChild&&S(n,t)),n=n.nextSibling}}function b(e,t,n){!1!==f(e)&&(t&&t.removeChild(e),p(e),S(e,n))}function w(e){d(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=c(t);if(r){var o=y[r];o&&ce(t,o)&&(t.parentNode.replaceChild(o,t),j(o,t))}w(t),t=n}}function j(r,o,i){var s=c(o);if(s&&delete y[s],!n.isSameNode||!n.isSameNode(t)){if(!i){if(!1===u(r,o))return;if(e(r,o),h(r),!1===m(r,o))return}"TEXTAREA"!==r.nodeName?function(e,t){var n,r,o,i,s,a=t.firstChild,d=e.firstChild;e:for(;a;){for(i=a.nextSibling,n=c(a);d;){if(o=d.nextSibling,a.isSameNode&&a.isSameNode(d)){a=i,d=o;continue e}r=c(d);var u=d.nodeType,h=void 0;if(u===a.nodeType&&(1===u?(n?n!==r&&((s=y[n])?o===s?h=!1:(e.insertBefore(s,d),r?v(r):b(d,e,!0),d=s):h=!1):r&&(h=!1),(h=!1!==h&&ce(d,a))&&j(d,a)):3!==u&&8!=u||(h=!0,d.nodeValue!==a.nodeValue&&(d.nodeValue=a.nodeValue))),h){a=i,d=o;continue e}r?v(r):b(d,e,!0),d=o}if(n&&(s=y[n])&&ce(s,a))e.appendChild(s),j(s,a);else{var f=l(a);!1!==f&&(f&&(a=f),a.actualize&&(a=a.actualize(e.ownerDocument||ae)),e.appendChild(a),w(a))}a=i,d=o}!function(e,t,n){for(;t;){var r=t.nextSibling;(n=c(t))?v(n):b(t,e,!0),t=r}}(e,d,r);var p=de[e.nodeName];p&&p(e,t)}(r,o):de.TEXTAREA(r,o)}}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var r=c(n);r&&(y[r]=n),e(n),n=n.nextSibling}}(t);var x,q,L=t,A=L.nodeType,I=n.nodeType;if(!g)if(1===A)1===I?ce(t,n)||(p(t),L=function(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}(t,(x=n.nodeName,(q=n.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==q?ae.createElementNS(q,x):ae.createElement(x)))):L=n;else if(3===A||8===A){if(I===A)return L.nodeValue!==n.nodeValue&&(L.nodeValue=n.nodeValue),L;L=n}if(L===n)p(t);else if(j(L,n,g),a)for(var E=0,T=a.length;E<T;E++){var C=y[a[E]];C&&b(C,C.parentNode,!1)}return!g&&L!==t&&t.parentNode&&(L.actualize&&(L=L.actualize(t.ownerDocument||ae)),t.parentNode.replaceChild(L,t)),L}}((function(e,t){var n,r,o,i,s,a=t.attributes;for(n=a.length-1;n>=0;--n)o=(r=a[n]).name,i=r.namespaceURI,s=r.value,i?(o=r.localName||o,e.getAttributeNS(i,o)!==s&&e.setAttributeNS(i,o,s)):e.getAttribute(o)!==s&&e.setAttribute(o,s);for(n=(a=e.attributes).length-1;n>=0;--n)!1!==(r=a[n]).specified&&(o=r.name,(i=r.namespaceURI)?(o=r.localName||o,t.hasAttributeNS(i,o)||e.removeAttributeNS(i,o)):t.hasAttribute(o)||e.removeAttribute(o))}));var pe=function(){function e(t){var n=t.itemCount,r=t.itemSizeGetter,o=t.estimatedItemSize;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemSizeGetter=r,this._itemCount=n,this._estimatedItemSize=o,this._itemSizeAndPositionData={},this._lastMeasuredIndex=-1}return e.prototype.getLastMeasuredIndex=function(){return this._lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this._itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this._itemCount);if(e>this._lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),n=t.offset+t.size,r=this._lastMeasuredIndex+1;r<=e;r++){var o=this._itemSizeGetter({index:r});if(null==o||isNaN(o))throw Error("Invalid size returned for index "+r+" of value "+o);this._itemSizeAndPositionData[r]={offset:n,size:o},n+=o}this._lastMeasuredIndex=e}return this._itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this._lastMeasuredIndex>=0?this._itemSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this._itemCount-this._lastMeasuredIndex-1)*this._estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,n=void 0===t?"start":t,r=e.containerSize,o=e.targetIndex;if(r<=0)return 0;var i=this.getSizeAndPositionForIndex(o),s=i.offset,a=s-r+i.size,c=void 0;switch(n){case"end":c=a;break;case"center":c=s-(r-i.size)/2;break;default:c=s}var l=this.getTotalSize();return Math.max(0,Math.min(l-r,c))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,n=e.offset,r=e.overscanCount;if(0===this.getTotalSize())return{};var o=n+t,i=this._findNearestItem(n),s=i,a=this.getSizeAndPositionForIndex(i);for(n=a.offset+a.size;n<o&&s<this._itemCount-1;)s++,n+=this.getSizeAndPositionForIndex(s).size;return r&&(i=Math.max(0,i-r),s=Math.min(s+r,this._itemCount)),{start:i,stop:s}},e.prototype.resetItem=function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)},e.prototype._binarySearch=function(e){for(var t=e.low,n=e.high,r=e.offset,o=void 0,i=void 0;t<=n;){if(o=t+Math.floor((n-t)/2),(i=this.getSizeAndPositionForIndex(o).offset)===r)return o;i<r?t=o+1:i>r&&(n=o-1)}if(t>0)return t-1},e.prototype._exponentialSearch=function(e){for(var t=e.index,n=e.offset,r=1;t<this._itemCount&&this.getSizeAndPositionForIndex(t).offset<n;)t+=r,r*=2;return this._binarySearch({high:Math.min(t,this._itemCount-1),low:Math.floor(t/2),offset:n})},e.prototype._findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch({high:n,low:0,offset:e}):this._exponentialSearch({index:n,offset:e})},e}();var me=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getRowHeight=function(e){var t=e.index,n=r.options.rowHeight;return"function"==typeof n?n(t):Array.isArray(n)?n[t]:n},this.container=t,this.options=n,this.state={},this._initializeSizeAndPositionManager(n.rowCount),this.render=this.render.bind(this),this.handleScroll=this.handleScroll.bind(this),this.componentDidMount()}return e.prototype.componentDidMount=function(){var e=this,t=this.options,n=t.onMount,r=t.initialScrollTop,o=t.initialIndex,i=t.height,s=r||null!=o&&this.getRowOffset(o)||0,a=this.inner=document.createElement("div"),c=this.content=document.createElement("div");a.setAttribute("style","position:relative; overflow:hidden; width:100%; min-height:100%; will-change: transform;"),c.setAttribute("style","position:absolute; top:0; left:0; height:100%; width:100%; overflow:visible;"),a.appendChild(c),this.container.appendChild(a),this.setState({offset:s,height:i},(function(){s&&(e.container.scrollTop=s),e.container.addEventListener("scroll",e.handleScroll),"function"==typeof n&&n()}))},e.prototype._initializeSizeAndPositionManager=function(e){this._sizeAndPositionManager=new pe({itemCount:e,itemSizeGetter:this.getRowHeight,estimatedItemSize:this.options.estimatedRowHeight||100})},e.prototype.setState=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];this.state=Object.assign(this.state,t),requestAnimationFrame((function(){e.render(),"function"==typeof n&&n()}))},e.prototype.resize=function(e,t){this.setState({height:e},t)},e.prototype.handleScroll=function(e){var t=this.options.onScroll,n=this.container.scrollTop;this.setState({offset:n}),"function"==typeof t&&t(n,e)},e.prototype.getRowOffset=function(e){return this._sizeAndPositionManager.getSizeAndPositionForIndex(e).offset},e.prototype.scrollToIndex=function(e,t){var n=this.state.height,r=this._sizeAndPositionManager.getUpdatedOffsetForIndex({align:t,containerSize:n,targetIndex:e});this.container.scrollTop=r},e.prototype.setRowCount=function(e){this._initializeSizeAndPositionManager(e),this.render()},e.prototype.onRowsRendered=function(e){var t=this.options.onRowsRendered;"function"==typeof t&&t(e)},e.prototype.destroy=function(){this.container.removeEventListener("scroll",this.handleScroll),this.container.innerHTML=""},e.prototype.render=function(){for(var e=this.options,t=e.overscanCount,n=e.renderRow,r=this.state,o=r.height,i=r.offset,s=void 0===i?0:i,a=this._sizeAndPositionManager.getVisibleRange({containerSize:o,offset:s,overscanCount:t}),c=a.start,l=a.stop,d=document.createDocumentFragment(),u=c;u<=l;u++)d.appendChild(n(u));this.inner.style.height=this._sizeAndPositionManager.getTotalSize()+"px",this.content.style.top=this.getRowOffset(c)+"px",fe(this.content,d,{childrenOnly:!0,getNodeKey:function(e){return e.nodeIndex}}),this.onRowsRendered({startIndex:c,stopIndex:l})},e}();function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}!function(e){function t(){return ge(this,t),ye(this,e.apply(this,arguments))}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),t.prototype.onRowsRendered=function(e){var t=this,n=e.startIndex,r=e.stopIndex,o=this.options,i=o.isRowLoaded,s=o.loadMoreRows,a=o.minimumBatchSize,c=void 0===a?10:a,l=o.rowCount,d=void 0===l?0:l,u=o.threshold,h=void 0===u?15:u;(function(e){for(var t=e.isRowLoaded,n=e.minimumBatchSize,r=e.rowCount,o=e.startIndex,i=e.stopIndex,s=[],a=null,c=null,l=o;l<=i;l++){t(l)?null!==c&&(s.push({startIndex:a,stopIndex:c}),a=c=null):(c=l,null===a&&(a=l))}if(null!==c){for(var d=Math.min(Math.max(c,a+n-1),r-1),u=c+1;u<=d&&!t({index:u});u++)c=u;s.push({startIndex:a,stopIndex:c})}if(s.length)for(var h=s[0];h.stopIndex-h.startIndex+1<n&&h.startIndex>0;){var f=h.startIndex-1;if(t({index:f}))break;h.startIndex=f}return s})({isRowLoaded:i,minimumBatchSize:c,rowCount:d,startIndex:Math.max(0,n-h),stopIndex:Math.min(d-1,r+h)}).forEach((function(e){var o=s(e);o&&o.then((function(){(function(e){var t=e.lastRenderedStartIndex,n=e.lastRenderedStopIndex,r=e.startIndex,o=e.stopIndex;return!(r>n||o<t)})({lastRenderedStartIndex:n,lastRenderedStopIndex:r,startIndex:e.startIndex,stopIndex:e.stopIndex})&&t.render()}))}))}}(me);let ve=class RefSelectorElement extends HTMLElement{constructor(){super(...arguments),this.input="",this.currentSelectionIndex=null}connectedCallback(){this.refType="branch"===this.getRequiredAttr("type")?ie.Branch:ie.Tag,this.currentCommittish=atob(this.getRequiredAttr("current-committish")),this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.currentUserCanPush="false"!==this.getAttribute("current-user-can-push");const e=this.getRequiredAttr("query-endpoint"),t=this.getRequiredAttr("cache-key");this.index=new SearchIndex(this.refType,this,e,t,this.nameWithOwner),this.setupFetchListeners()}inputEntered(e){this.input=e.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(e,t){return new p(e,t,m)}renderRow(e){const t=this.index.currentSearchResult[e];if(!t&&e-this.index.currentSearchResult.length>=1)return document.createElement("span");if(!t)return this.renderTemplate(this.noMatchTemplate,{index:e,refName:this.input});const n=this.input.length>0,r=n?"is-filtering":"",o=this.renderTemplate(this.itemTemplate,{refName:t,index:e,isFilteringClass:r,urlEncodedRefName:this.urlEncodeRef(t),isCurrent:t===this.currentCommittish,isNotDefault:t!==this.defaultBranch});if(n){const e=o.querySelector("span");e.textContent="";const n=t.split(this.input),r=n.length-1;for(let t=0;t<n.length;t++){const o=n[t];if(e.appendChild(document.createTextNode(o)),t<r){const t=document.createElement("b");t.textContent=this.input,e.appendChild(t)}}}return o}urlEncodeRef(e){return encodeURIComponent(e).replace("%2F","/").replace("%3A",":").replace("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList)return this.index.search(this.input),void this.setupVirtualizedList();this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listLength(){const e=this.index.currentSearchResult.length;return this.showCreateForm?e+1:e||1}get showCreateForm(){return!this.index.exactMatchFound&&""!==this.input&&this.refType===ie.Branch&&this.currentUserCanPush}getRequiredAttr(e,t=this){const n=t.getAttribute(e);if(!n)throw new Error(`Missing attribute for ${t}: ${e}`);return n}setupFetchListeners(){const e=this.closest("details");let t=!1;const n=()=>{t||(this.index.fetchData(),t=!0)};e&&!e.open?(this.addEventListener("container-mouseover",n,{once:!0}),this.addEventListener("focusin",this.focusin),this.addEventListener("keydown",this.keydown)):n()}focusin(e){if(!this.virtualizedList)return;if(!e.relatedTarget)return;"SelectMenu-tab"===e.relatedTarget.className&&(e.preventDefault(),e.stopPropagation(),this.focusFirstListMember())}focusFirstListMember(){this.virtualizedList&&(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}keydown(e){if(null!==this.currentSelectionIndex)if("Enter"!==e.key){if(("Tab"!==e.key||!e.shiftKey)&&"Escape"!==e.key)switch(e.preventDefault(),e.stopPropagation(),e.key){case"ArrowUp":this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break;case"Home":this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break;case"End":this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break;case"Tab":case"ArrowDown":this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex)}}else{const e=document.activeElement;if(!e)return;e.click()}}focusItemAtIndex(e){this.virtualizedList.scrollToIndex(e,"center");const t=this.listContainer.querySelector(`[data-index="${e}"]`);t&&t.focus()}setupVirtualizedList(){this.listContainer.innerHTML="",this.virtualizedList=new me(this.listContainer,{height:330,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:e=>this.showCreateForm&&e===this.listLength-1?51:33,initialIndex:0,overscanCount:6})}};e([t],ve.prototype,"listContainer",void 0),e([t],ve.prototype,"itemTemplate",void 0),e([t],ve.prototype,"noMatchTemplate",void 0),ve=e([o],ve)}}}));
//# sourceMappingURL=repositories-495947a8.js.map
